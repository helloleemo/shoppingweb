import{_ as p,e as g,r,o as u,c as _,d as n,b as t,f as b,k as m,F as h}from"./index-CybjTFcM.js";import{T as f}from"./ToastMessages-QQEAdR9w.js";import"./component-functions-CUoJew-O.js";const C="/shopping-web/assets/logo2_dark-BEoxkzrx.png",x={data(){return{cartCount:0,isLoading:!1}},watch:{cartCount(){g.on("emitter-cartCount",a=>{this.cartCount=a,console.log(a)}),this.getCart()}},methods:{getToView(){this.$router.push("/user/view")},getToCart(){this.$router.push("/user/cartview")},getCart(){const a="https://vue3-course-api.hexschool.io/api/leemotseng-api/cart";this.isLoading=!0,this.$http.get(a).then(s=>{this.isLoading=!1,this.cartCount=s.data.data.total})},updateCart(a){const s=`https://vue3-course-api.hexschool.io/api/leemotseng-api/cart/${a.id}`;this.isLoading=!0,this.status.loadingItem=a.id;const i={product_id:a.product_id,qty:a.qty};this.$http.put(s,{data:i}).then(c=>{console.log(c),this.status.loadingItem="",this.isLoading=!0,this.getCart()})}},created(){this.getCart()}},$={class:"navbar navbarMain navbar-expand-lg fixed-top navbar-light py-3",id:"mainNav"},w={class:"container px-4 px-lg-5"},T={class:"imgboxLogo"},L=t("button",{class:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),k={class:"collapse navbar-collapse",id:"navbarResponsive"},y={class:"navbar-nav ms-auto my-2 my-lg-0"},N=t("li",{class:"nav-item"},[t("a",{class:"nav-link",href:"#/user/cart"},"產品")],-1),B={class:"nav-item"},V={class:"bag-tag text-primary bi-cart-fill me-1 position-relative"},M={class:"position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"};function U(a,s,i,c,l,e){const d=r("Loading");return u(),_(h,null,[n(d,{active:l.isLoading},null,8,["active"]),t("nav",$,[t("div",w,[t("div",T,[t("img",{onClick:s[0]||(s[0]=(...o)=>e.getToView&&e.getToView(...o)),src:C,alt:""})]),L,t("div",k,[t("ul",y,[N,t("li",B,[t("button",{onClick:s[1]||(s[1]=(...o)=>e.getToCart&&e.getToCart(...o)),type:"button",class:"btn cart-icon me-3 px-2"},[t("i",V,[b(t("span",M,null,512),[[m,l.cartCount!==0]])])])])])])])])],64)}const R=p(x,[["render",U]]),q={components:{UserNavbar:R,ToastMessages:f},provide(){return{emitter:g}},create(){}};function E(a,s,i,c,l,e){const d=r("UserNavbar"),o=r("ToastMessages"),v=r("router-view");return u(),_(h,null,[n(d),n(o),n(v)],64)}const D=p(q,[["render",E]]);export{D as default};
