import{_ as g,r as _,c as i,d as m,b as t,F as u,h as b,t as l,i as v,o as d,f as C,v as f,a as y}from"./index-CybjTFcM.js";import{_ as x}from"./pixlr-image-generator-f52d878e-1507-4286-b72e-57dbeb3cad0a-AZWfj3Dk.js";const $={component:{},data(){return{cart:{},status:{loadingItem:""},cartCount:0}},methods:{getToProduct(){this.$router.push("/user/cart")},getToCartOrder(){this.$router.push("/user/cartorder")},getCart(){const e="https://vue3-course-api.hexschool.io/api/leemotseng-api/cart";this.isLoading=!0,this.$http.get(e).then(o=>{this.cart=o.data.data,this.isLoading=!1})},delCart(e){this.status.loadingItem=e;const o=`https://vue3-course-api.hexschool.io/api/leemotseng-api/cart/${e}`;this.isloading=!0,this.$http.delete(o).then(a=>{this.$httpMessageState(a,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isloading=!1})},updateCart(e){const o=`https://vue3-course-api.hexschool.io/api/leemotseng-api/cart/${e.id}`;this.isLoading=!0,this.status.loadingItem=e.id;const a={product_id:e.product_id,qty:e.qty};this.$http.put(o,{data:a}).then(h=>{console.log(h),this.status.loadingItem="",this.isLoading=!1,this.getCart()})},createOrder(){const e="https://vue3-course-api.hexschool.io/api/leemotseng-api/order",o=this.form;this.$http.post(e,{data:o}).then(a=>{console.log(a)})}},created(){this.getCart()}},k=t("div",{class:"banner"},[t("div",{class:"imgbox"},[t("img",{class:"img",src:x,alt:""})])],-1),L={class:"cartBg"},T={class:"container d-flex justify-content-center mx-auto"},I={class:"cart border bg-white rounded-3 p-5 my-5"},V=t("h3",{class:"text-center pd-2"},"購物車清單",-1),q=t("hr",null,null,-1),w={class:"table table-hover align-middle"},P=t("thead",null,[t("tr",null,[t("th",null,"品項"),t("th",null,"數量"),t("th",null,"單價"),t("th")])],-1),B={class:"qty input-group input-group-sm"},N=["disabled","onUpdate:modelValue","onChange"],O=["disabled","onClick"],S=t("i",{class:"bi bi-trash3"},null,-1),U=[S],D={colspan:"4",class:"text-end"},F={class:"btnSet d-flex"};function M(e,o,a,h,n,r){const p=_("LoadingPage");return d(),i(u,null,[m(p,{active:e.isLoading},null,8,["active"]),k,t("div",L,[t("div",T,[t("div",I,[V,q,t("table",w,[P,t("tbody",null,[n.cart.carts?(d(),i(u,{key:0},[(d(!0),i(u,null,b(n.cart.carts,s=>(d(),i("tr",{key:s.id},[t("td",null,l(s.product.title),1),t("td",null,[t("div",B,[C(t("input",{disabled:s.id===n.status.loadingItem,"onUpdate:modelValue":c=>s.qty=c,min:"1",onChange:c=>r.updateCart(s),type:"number",class:"form-control itemQty"},null,40,N),[[f,s.qty,void 0,{number:!0}]]),y(" "+l(s.product.unit),1)])]),t("td",null,l(e.$filters.currency(s.product.price)),1),t("td",null,[t("button",{disabled:n.status.loadingItem===s.id,onClick:c=>r.delCart(s.id),type:"button",class:"btn btn-sm"},U,8,O)])]))),128)),t("tr",null,[t("td",D,l(e.$filters.currency(n.cart.final_total)),1)])],64)):v("",!0)])]),t("div",F,[t("button",{onClick:o[0]||(o[0]=(...s)=>r.getToProduct&&r.getToProduct(...s)),class:"btn btn-outline-primary w-50 mx-5"}," 返回繼續購物 "),t("button",{onClick:o[1]||(o[1]=(...s)=>r.getToCartOrder&&r.getToCartOrder(...s)),class:"btn btn-primary w-50 mx-5"},"結帳")])])])])],64)}const Q=g($,[["render",M]]);export{Q as default};
