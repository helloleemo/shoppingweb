import{_ as u,r as _,c as r,d as p,b as e,f as b,v as m,w as y,i as c,F as a,h as v,t as d,m as g,o as l}from"./index-CybjTFcM.js";import{_ as f}from"./pixlr-image-generator-f52d878e-1507-4286-b72e-57dbeb3cad0a-AZWfj3Dk.js";const x={data(){return{order:{user:{}},orderId:"",isLoading:!1}},methods:{getOrder(){const n=`https://vue3-course-api.hexschool.io/api/leemotseng-api/order/${this.orderId}`;this.$http.get(n).then(t=>{t.data.success&&(this.order=t.data.order,console.log(this.order))})},payOrder(){const n=`https://vue3-course-api.hexschool.io/api/leemotseng-api/pay/${this.orderId}`;this.$http.post(n).then(t=>{console.log(t),t.data.success&&this.getOrder()})},getToView(){this.$router.push("/user/view")}},created(){this.orderId=this.$route.params.orderId,console.log(this.orderId),this.getOrder()}},w=e("div",{class:"banner"},[e("div",{class:""},[e("img",{class:"img",src:f,alt:""})])],-1),k={class:"container"},V={class:"row justify-content-between"},I=g('<div class="col-md-5"><nav aria-label="breadcrumb"><ol class="breadcrumb my-4"><li class="breadcrumb-item"><a href="#/user/view">首頁</a></li><li class="breadcrumb-item"><a href="#/user/cart">產品</a></li><li class="breadcrumb-item"><a href="#/user/cartview">購物車</a></li><li class="breadcrumb-item active" aria-current="page">確認訂單</li></ol></nav></div>',1),O={class:"col-md-3"},S={class:"d-flex my-4",role:"search"},T=e("button",{class:"btn btn-outline-secondary",type:"submit"},"Search",-1),C={class:"step d-flex justify-content-center"},L={class:"row container mx-5 py-5"},j=e("div",{class:"col mt-3 text-center"},[e("div",{class:"step-num"},[e("h5",{class:"border rounded-pill bg-secondary text-white p-3"},"完成訂單資料")])],-1),N={class:"col text-center"},B={class:"step-num py-3"},D={key:0,class:"h5 border rounded-pill bg-secondary text-white p-3"},E={key:1,class:"h5 border rounded-pill bg-secondary text-white p-3"},F={class:"col text-center"},M={class:"step-num py-3"},P={key:0,class:"h5 border rounded-pill bg-white text-secondary p-3"},U={key:1,class:"h5 border rounded-pill bg-secondary text-white p-3"},q={class:"my-5 row justify-content-center"},z={key:0,class:"text-center pb-3"},A=e("h4",{class:"text-center pb-3"},"訂單內容",-1),G=e("hr",null,null,-1),H={class:"table align-middle"},J=e("thead",null,[e("th",null,"品名"),e("th",null,"數量"),e("th",{class:"text-end"},"單價")],-1),K={class:"text-end"},Q=e("td",{colspan:"2",class:"text-end"},"總計",-1),R={class:"text-end"},W=e("h4",{class:"text-center pb-3"},"訂購人資料",-1),X={class:"table"},Y=e("th",{width:"100"},"Email",-1),Z=e("th",null,"姓名",-1),$=e("th",null,"收件人電話",-1),ee=e("th",null,"收件人地址",-1),te=e("th",null,"付款狀態",-1),se={key:0},oe={key:1,class:"text-success"},re={key:1,class:"d-flex justify-content-between"},le=e("button",{class:"btn mt-4 btn-dark w-50"},"確認付款",-1),de={class:"text-center"};function ne(n,t,ie,ce,s,i){const h=_("LoadingPage");return l(),r(a,null,[p(h,{active:s.isLoading},null,8,["active"]),w,e("div",k,[e("div",V,[I,e("div",O,[e("form",S,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.search=o),class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"},null,512),[[m,n.search]]),T])])])]),e("div",C,[e("div",L,[j,e("div",N,[e("div",B,[s.order.is_paid?(l(),r("h2",E,"確認訂單")):(l(),r("h2",D," 確認訂單 "))])]),e("div",F,[e("div",M,[s.order.is_paid?(l(),r("h2",U,"付款完成")):(l(),r("h2",P," 付款完成 "))])])])]),e("div",q,[e("form",{class:"col-md-6 mb-5",onSubmit:t[3]||(t[3]=y((...o)=>i.payOrder&&i.payOrder(...o),["prevent"]))},[s.order.is_paid?(l(),r("h4",z,"已成功付款！")):c("",!0),A,G,e("table",H,[J,e("tbody",null,[(l(!0),r(a,null,v(s.order.products,o=>(l(),r("tr",{key:o.id},[e("td",null,d(o.product.title),1),e("td",null,d(o.qty)+" "+d(o.product.unit),1),e("td",K,d(o.final_total),1)]))),128))]),e("tfoot",null,[e("tr",null,[Q,e("td",R,d(s.order.total),1)])])]),W,e("table",X,[e("tbody",null,[e("tr",null,[Y,e("td",null,d(s.order.user.email),1)]),e("tr",null,[Z,e("td",null,d(s.order.user.name),1)]),e("tr",null,[$,e("td",null,d(s.order.user.tel),1)]),e("tr",null,[ee,e("td",null,d(s.order.user.address),1)]),e("tr",null,[te,e("td",null,[s.order.is_paid?(l(),r("span",oe,"付款完成")):(l(),r("span",se,"尚未付款"))])])])]),s.order.is_paid===!1?(l(),r("div",re,[e("button",{onClick:t[1]||(t[1]=(...o)=>i.getToView&&i.getToView(...o)),class:"btn mt-4 btn-outline-dark"},"修改訂單"),le])):c("",!0),e("div",de,[s.order.is_paid?(l(),r("button",{key:0,onClick:t[2]||(t[2]=(...o)=>i.getToView&&i.getToView(...o)),class:"btn btn-outline-dark mt-4 w-50"}," 返回首頁 ")):c("",!0)])],32)])],64)}const ue=u(x,[["render",ne]]);export{ue as default};
