import{U as w}from"./UserFooter-BsmVzE8t.js";import{_ as F,r as i,c as m,d as o,b as e,f as b,v as f,F as p,h as U,t as n,i as k,g as C,m as v,o as u,n as h}from"./index-CybjTFcM.js";import{_ as L}from"./pixlr-image-generator-f52d878e-1507-4286-b72e-57dbeb3cad0a-AZWfj3Dk.js";const S={component:{UserFooter:w},data(){return{cart:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:"",isLoading:!1,cartCount:0}},methods:{createOrder(){const r="https://vue3-course-api.hexschool.io/api/leemotseng-api/order",s=this.form;this.$http.post(r,{data:s}).then(_=>{this.orderId=_.data.orderId,console.log(_.data.orderId),this.$router.push(`/user/checkout/${this.orderId}`)})},getCart(){const r="https://vue3-course-api.hexschool.io/api/leemotseng-api/cart";this.isLoading=!0,this.$http.get(r).then(s=>{this.cart=s.data.data,this.isLoading=!1})}},created(){this.getCart()}},q=e("div",{class:"banner"},[e("div",{class:""},[e("img",{class:"img",src:L,alt:""})])],-1),I={class:"container"},E={class:"row justify-content-between"},N=v('<div class="col-md-5"><nav aria-label="breadcrumb"><ol class="breadcrumb my-4"><li class="breadcrumb-item"><a href="#/user/view">首頁</a></li><li class="breadcrumb-item"><a href="#/user/cart">產品</a></li><li class="breadcrumb-item"><a href="#/user/cartview">購物車</a></li><li class="breadcrumb-item active" aria-current="page">確認訂單</li></ol></nav></div>',1),j={class:"col-md-3"},B={class:"d-flex my-4",role:"search"},M=e("button",{class:"btn btn-outline-secondary",type:"submit"},"Search",-1),O=v('<div class="step d-flex justify-content-center"><div class="row container mx-5 py-5"><div class="col mt-3 text-center"><div class="step-num"><h5 class="border rounded-pill bg-num bg-secondary text-white p-3">完成訂單資料</h5></div></div><div class="col text-center"><div class="step-num py-3"><h2 class="h5 border rounded-pill bg-white text-secondary p-3">確認訂單</h2></div></div><div class="col text-center"><div class="step-num py-3"><h2 class="h5 border rounded-pill bg-white text-secondary p-3">付款完成</h2></div></div></div></div>',1),D={class:"container d-flex justify-content-center mx-auto"},P={class:"cart border bg-white rounded-3 p-5 my-5"},z={class:"tableCart"},T=e("h3",{class:"text-center pd-2"},"您的訂單",-1),A=e("hr",null,null,-1),G={class:"table table-hover align-middle"},H=e("thead",null,[e("tr",null,[e("th",null,"品項"),e("th",null,"數量"),e("th",null,"單價")])],-1),J={class:"qty"},K={colspan:"4",class:"text-end"},Q={class:"tableForm"},R={class:"contentForm my-5"},W={class:"mb-3"},X=e("h3",{class:"text-center pd-2"},"訂購人資料",-1),Y=e("hr",null,null,-1),Z=e("label",{for:"email",class:"form-label"},"Email",-1),$={class:"mb-3"},ee=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),se={class:"mb-3"},te=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),le={class:"mb-3"},oe=e("label",{for:"address",class:"form-label"},"收件人地址",-1),ae={class:"mb-3"},re=e("label",{for:"message",class:"form-label"},"留言",-1),ie=e("div",{class:"text-center"},[e("button",{class:"btn w-50 btn-outline-dark"},"送出訂單")],-1);function ne(r,s,_,de,t,g){const y=i("LoadingPage"),d=i("VField"),c=i("ErrorMessage"),V=i("VForm"),x=i("UserFooter");return u(),m(p,null,[o(y,{active:t.isLoading},null,8,["active"]),q,e("div",I,[e("div",E,[N,e("div",j,[e("form",B,[b(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>r.search=l),class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"},null,512),[[f,r.search]]),M])])])]),O,e("div",D,[e("div",P,[e("div",z,[T,A,e("table",G,[H,e("tbody",null,[t.cart.carts?(u(),m(p,{key:0},[(u(!0),m(p,null,U(t.cart.carts,l=>(u(),m("tr",{key:l.id},[e("td",null,n(l.product.title),1),e("td",null,[e("div",J,n(l.qty)+" "+n(l.product.unit),1)]),e("td",null,n(r.$filters.currency(l.product.price)),1)]))),128)),e("tr",null,[e("td",K,n(r.$filters.currency(t.cart.final_total)),1)])],64)):k("",!0)])])]),e("div",Q,[e("div",R,[o(V,{class:"",onSubmit:g.createOrder},{default:C(({errors:l})=>[e("div",W,[X,Y,Z,o(d,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),o(c,{name:"email",class:"invalid-feedback"})]),e("div",$,[ee,o(d,{id:"name",name:"姓名",type:"text",class:h(["form-control",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(c,{name:"姓名",class:"invalid-feedback"})]),e("div",se,[te,o(d,{id:"tel",name:"電話",type:"tel",class:h(["form-control",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:"required",modelValue:t.form.user.tel,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.tel=a)},null,8,["class","modelValue"]),o(c,{name:"電話",class:"invalid-feedback"})]),e("div",le,[oe,o(d,{id:"address",name:"地址",type:"text",class:h(["form-control",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[4]||(s[4]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(c,{name:"地址",class:"invalid-feedback"})]),e("div",ae,[re,b(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[5]||(s[5]=a=>t.form.message=a)},null,512),[[f,t.form.message]])]),ie]),_:1},8,["onSubmit"])])])])]),o(x)],64)}const he=F(S,[["render",ne]]);export{he as default};
